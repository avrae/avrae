.. _automation_quirks:

Additional Automation Support
===============================

There are many spells and actions that have additional functionality that is not explained or detailed in the relevant lookup or ``!help``.  This page is meant to document those quirks and how to use them.

.. _class_feature_dc:

Specifying Class Feature DC Bonuses
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

You can grant bonuses to your class Saving Throw DCs by creating a cvar: ``XDCBonus`` (``WarlockDCBonus``, ``BloodHunterDCBonus``, ``MonkDCBonus``, etc).

This is to account for items such as the Dragonhide Belt, which adds a flat +1/2/3 bonus to the save DC for your class.

.. note::
    ``XDCBonus`` is not generated by the the sheet itself, but is instead set by the user. It will grant the given bonus to the save DC of actions for that class.
    You can set it with ``!cvar XDCBonus #``, such as ``!cvar MonkDCBonus 2``, or with Draconic using :meth:`~aliasing.api.AliasCharacter.set_cvar`.

    This cvar should be an integer, or it could cause the automation to not run.

For more details on implementing this in homebrew, see :any:`class_feature_dc_impl`

Spells with Additional Support
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.. note::
    ``-choice`` always transforms the argument to lowercase (``-choice FIre`` will be treated as ``-choice fire``), making it case insensitive.

    Additionally, all of the options below use the `in` operator, so you can use partial matches (``-choice fire`` will match ``-choice fireball``)


Absorb Elements
-------------------
You can have the automation automatically apply the damage type resistance you want to absorb using ``-choice [element]`` (``-choice fire`` for instance).

Additionally, you can have the automation heal you for half the damage you absorb by adding ``-amt [amount]`` to the end of the command. (``-amt 5`` for instance). It will half the damage you specify, and heal you for that amount.

You can use both of these together (``-choice fire -amt 5`` for instance).

Alter Self
-----------------
You can specify the type of alteration you want to take with the ``-choice`` argument.

* ``-choice aquaticswimwater`` for the Aquatic Adaptation option
* ``-choice appearancealter`` for the Change Appearance option
* ``-choice naturalweapon`` for the Natural Weapons option


Blindness/Deafness
---------------------
You can specify the type of hindrance you want to apply with the ``-choice`` argument.

* ``-choice blindness`` for the Blindness option
* ``-choice deafness`` for the Deafness option

Chromatic Orb
-----------------
You can specify the type of damage you want to apply with the ``-choice`` argument or by setting the ``ChromaticOrbDType`` cvar.

* ``-choice acid`` for Acid damage
* ``-choice cold`` for Cold damage
* ``-choice fire`` for Fire damage
* ``-choice lightning`` for Lightning damage
* ``-choice poison`` for Poison damage
* ``-choice thunder`` for Thunder damage

You can also set a default damage type using the ``ChromaticOrbDType`` cvar (e.g., ``!cvar ChromaticOrbDType fire``). The cvar will be used if no ``-choice`` is provided at cast time. If neither is provided, it will do [chromatic] damage by default.

Destructive Wave
-----------------
You can specify the type of additional damage you want to apply with the ``-choice`` argument.

* ``-choice necrotic`` for Necrotic damage
* No choice or any other value defaults to Radiant damage

Dragon's Breath
-----------------
You can specify the type of damage you want to apply with the ``-choice`` argument. If a choice is *not* provided at cast time, it will do [chromatic] damage by default, and you will need to use ``-choice [element]`` to specify the damage type each time the breath attack is used, and adjustments may be required to the targets health, depending on resistances.

In this case, it does not check against a value, but instead just inputs whatever is given. This means you can technically give someone Pizza Breath with ``-choice pizza``.

Elemental Weapon
-----------------
You can specify the type of elemental damage you want to apply with the ``-choice`` argument.

* ``-choice acid`` for Acid damage
* ``-choice cold`` for Cold damage
* ``-choice fire`` for Fire damage
* ``-choice lightning`` for Lightning damage
* ``-choice thunder`` for Thunder damage

Eldritch Blast
-----------------
Eldritch Blast has a number of Eldritch Invocations that can affect it. You can add these to your ``invocations`` cvar to have them automatically applied when you cast Eldritch Blast.

If you add ``agonizing blast`` to your ``invocations`` cvar (``!cvar invocations agonizing blast``), it will automatically add your charisma when casting blast now.

Additionally, if you have other (official) invocations that affect blast, you can similarly add those to that cvar (``!cvar invocations agonizing blast, lance of lethargy`` for instance), and it will add reminder text for them as well.

Like ``-choice``, the automation will check against a lowercase version of the cvar, so ``!cvar invocations Agonizing Blast`` will work just as well as ``!cvar invocations agonizing blast``.

.. list-table:: Supported Invocations
    :widths: 25 75
    :header-rows: 1

    * - Invocation Name
      - Automation Support
    * - Agonizing Blast
      - Adds your Charisma modifier to the damage
    * - Repelling Blast
      - Includes reminder text
    * - Eldritch Spear
      - Includes reminder text
    * - Grasp Of Hadar
      - Includes reminder text
    * - Lance Of Lethargy
      - Includes reminder text


Enhance Ability
-----------------
You can specify the ability you want to enhance with the ``-choice`` argument.

* ``-choice bearsconstitution``
* ``-choice bullsstrength``
* ``-choice catsdexterity``
* ``-choice eaglescharisma``
* ``-choice foxsintelligence``
* ``-choice owlswisdom``

Enlarge/Reduce
-----------------
You can specify the adjustment you want to apply with the ``-choice`` argument.

* ``-choice enlarged`` to enlarge the targets size
* ``-choice reduced`` to reduce the targets size

Eyebite
-----------------
You can specify the type of effect you want to apply with the ``-choice`` argument.

* ``-choice asleep`` to apply the Asleep effect
* ``-choice panicked`` to apply the Panicked effect
* ``-choice sickened`` to apply the Sickened effect

Fire Shield
-----------------
You can specify the type of shield you want to apply with the ``-choice`` argument.

* ``-choice warmfire`` to create a Warm Shield
* ``-choice chillcold`` to create a Chill Shield

Flame Strike
-----------------
You can specify the type of additional damage you want to apply with the ``-choice`` argument when upcasting. If a choice is *not* provided at cast time, it will do [choice] damage by default, and adjustments may be required to the targets health, depending on resistances.

In this case, it does not check against a value, but instead just inputs whatever is given. This means you can technically have it be a Pizza Strike and deal extra [pizza] damage with ``-choice pizza``.


Guardian of Nature
--------------------
You can specify the type of form you want to apply with the ``-choice`` argument.

* ``-choice "primal beast"`` for the Primal Beast option
* ``-choice "great tree"`` for the Great Tree option

Hex
---------
You can specify the affected ability score with ``-choice``. This also applies to the ``Shift Hex`` action the spell grants for shifting the hex after the target dies.

* ``-choice strength``
* ``-choice dexterity``
* ``-choice constitution``
* ``-choice intelligence``
* ``-choice wisdom``
* ``-choice charisma``

Shield
-----------------
You can have the automation automatically heal you for the damage you absorb by adding ``-amt [amount]`` to the end of the command. (``-amt 5`` for instance). It will heal you for the amount you specify.

Sorcerous Burst
-----------------
You can specify the type of damage you want to apply with the ``-choice`` argument or by setting the ``SorcerousBurstDType`` cvar.

* ``-choice acid`` for Acid damage
* ``-choice cold`` for Cold damage
* ``-choice fire`` for Fire damage
* ``-choice lightning`` for Lightning damage
* ``-choice poison`` for Poison damage
* ``-choice psychic`` for Psychic damage
* ``-choice thunder`` for Thunder damage

You can also set a default damage type using the ``SorcerousBurstDType`` cvar (e.g., ``!cvar SorcerousBurstDType lightning``). The cvar will be used if no ``-choice`` is provided at cast time. If neither is provided, it will do [elemental] damage by default.

Spirit Guardians
-------------------
You can specify the type of damage you want to apply with the ``-choice`` argument or by setting the ``SpiritGuardiansDType`` cvar.

* ``-choice good``, ``-choice neutral``, ``-choice angelic``, ``-choice fey``, or ``-choice fae`` for the Radiant damage option
* ``-choice evil``, ``-choice fiendish``, or ``-choice necrotic`` for the Necrotic damage option

You can also set a default damage type using the ``SpiritGuardiansDType`` cvar (e.g., ``!cvar SpiritGuardiansDType good``). The cvar will be used if no ``-choice`` is provided at cast time.


Spirit Shroud
-----------------
You can specify the type of damage you want to apply to the granted attack with the ``-choice`` argument. If a choice is *not* provided at cast time, it will do [shroud] damage by default, and adjustments may be required to the targets health, depending on resistances.

In this case, it does not check against a value, but instead just inputs whatever is given. This means you can technically have it be a Pizza Shroud deal [pizza] damage with ``-choice pizza``.